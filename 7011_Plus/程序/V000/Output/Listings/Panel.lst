C51 COMPILER V9.57.0.0   PANEL                                                             05/28/2020 16:09:52 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE PANEL
OBJECT MODULE PLACED IN ..\Output\Objects\Panel.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\User\AppCode\ManageLayer\Panel.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.
                    -.\User\AppCode\AppLayer;..\User\AppCode\DriverLayer;..\User\AppCode\ManageLayer;..\User\AppCode\WIFILayer;..\User\SysCod
                    -e\Core) DEBUG OBJECTEXTEND PRINT(..\Output\Listings\Panel.lst) OBJECT(..\Output\Objects\Panel.obj)

line level    source

   1          #include "Panel.h"
   2          #include "SysDataDef.h"
   3          
   4          #define LED_BITS 1
   5          LED_DEF Led;
   6          
   7          UI16 LedFlashTim = 150;
   8          
   9          /********************************************************
  10          函数：Init_Panel()
  11          功能：初始化数组
  12          耗时：
  13          输入：无
  14          输出：无
  15          返回：无
  16          时间：2019/8/5
  17          ********************************************************/
  18          void Init_Panel(void)
  19          {
  20   1          Fls[0] = 0xFF;
  21   1      
  22   1          Led.FlashOn = 0xFF;
  23   1          Led.FlashOff = 0xFF;
  24   1      }
  25          
  26          /********************************************************
  27          函数：LED_ReLedFlash()
  28          功能：LED闪烁更新函数
  29          周期：1ms
  30          耗时：
  31          输入：
  32          输出：无
  33          返回：无
  34          时间：2019/8/5
  35          ********************************************************/
  36          void LED_ReLedFlash(void)
  37          {
  38   1          if(!AllFlashF) return;
  39   1          
  40   1          if((Led.Flag) && (Led.Tim >= LedFlashTim))
  41   1          {
  42   2      
  43   2              Fls[0] |= Led.FlashOn;
  44   2              Led.Tim = 0;
  45   2              Led.Flag = 0;
  46   2          }
  47   1          else if((!(Led.Flag)) && (Led.Tim >= LedFlashTim))
  48   1          {
  49   2              Fls[0] &= Led.FlashOff;
  50   2              Led.Tim = 0;
  51   2              Led.Flag = 1;
  52   2          }
  53   1          
C51 COMPILER V9.57.0.0   PANEL                                                             05/28/2020 16:09:52 PAGE 2   

  54   1          Led.Tim++;
  55   1      }
  56          
  57          /********************************************************
  58          函数：LED_SetDigFlash()
  59          功能：设置一个数码管闪烁
  60          周期：无
  61          耗时：
  62          输入：DigNum: 位选地址(0 - 15)
  63                Mode：闪烁模式 (0 - 3)
  64          输出：无
  65          返回：无
  66          时间：2019/8/5
  67          *******************************************************/
  68          void LED_SetFlash(UI08 Mode)
  69          {
  70   1          Led.FlashOn = 0xff; 
  71   1          Led.FlashOff = 0x00;
  72   1          
  73   1          if(Mode == 0)
  74   1              LedFlashTim = 150;
  75   1          else
  76   1              LedFlashTim = 25;    
  77   1      }
  78          
  79          /********************************************************
  80          函数：LED_ClrFlash()
  81          功能：清除一个数码管闪烁
  82          周期：无
  83          耗时：
  84          输入：DigNum: 位选地址(0 - 15)
  85          输出：无
  86          返回：无
  87          时间：2019/8/5
  88          ********************************************************/
  89          void LED_ClrFlash(void)
  90          {
  91   1          Led.FlashOn = 0xff; 
  92   1          Led.FlashOff = 0xff;
  93   1      }
  94          
  95          
  96          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    182    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      7    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
